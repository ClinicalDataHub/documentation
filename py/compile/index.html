<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  
  <link rel="shortcut icon" href="../img/favicon.ico">
  <title>Compiling python files to an executable - healthcare.ai</title>
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">
  
  <script>
    // Current page data
    var mkdocs_page_name = "Compiling python files to an executable";
    var mkdocs_page_input_path = "compile.md";
    var mkdocs_page_url = "/compile/";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script> 
  
  <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-85609357-1', 'auto');
      ga('send', 'pageview');
  </script>
  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> healthcare.ai</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
	<ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Introduction</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../getting_started/">Getting started</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../FAQ/">FAQ</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../hints/">Hints and tips</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../develop/">Developing and comparing models.md</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../deploy/">Saving and deploying a model</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Compiling python files to an executable</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#compiling-python-files-to-an-exe">Compiling Python files to an exe</a></li>
                
                    <li><a class="toctree-l4" href="#why-might-i-want-to-do-this">Why might I want to do this?</a></li>
                
                    <li><a class="toctree-l4" href="#how-does-this-relate-to-healthcareai">How does this relate to healthcare.ai?</a></li>
                
                    <li><a class="toctree-l4" href="#the-workflow-of-saving-and-compiling-a-model-to-exe">The workflow of saving and compiling a model to exe</a></li>
                
            
            </ul>
        
    </li>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">healthcare.ai</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Compiling python files to an executable</li>
    <li class="wy-breadcrumbs-aside">
      
        <a href="https://github.com/HealthCatalystSLC/healthcareai-py/"> Edit on healthcareai-py</a>
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="compiling-python-files-to-an-exe">Compiling Python files to an exe</h1>
<h2 id="why-might-i-want-to-do-this">Why might I want to do this?</h2>
<p>Note: this is optional to model deployment. When working in with
production environments, occasionally there are machines that one has to
keep relatively pure. In other words, perhaps you don't want to install
a Python (or more specifically, a Python interpreter) on that machine.</p>
<p>But what if you want to run a Python-based predictive model on that same
machine, and tie it into nightly ETL processes? That's why you'd want to
compile your .py file (which runs your model, for example) to an exe--if
you're using Windows--such that it's the only thing you place on the
machine that you want to keep pure. If you're using a OS X, one can
<a href="https://pythonhosted.org/py2app/">compile to an .app file</a>.</p>
<h2 id="how-does-this-relate-to-healthcareai">How does this relate to healthcare.ai?</h2>
<p>After you've been able to <a href="http://healthcare.ai/py/deploy.html">deploy</a>
predictions from your model back to SQL Server, you may want to compile
your .py file to an exe.</p>
<h2 id="the-workflow-of-saving-and-compiling-a-model-to-exe">The workflow of saving and compiling a model to exe</h2>
<p>1)  Train and save your model by running your
    <a href="http://healthcare.ai/py/deploy.html">deploy</a> .py file with the
    <code>use_saved_model=False</code> argument, such that two pkl files are
    created
2)  checked that you can run the model from from the pkl files, by
    setting <code>use_saved_model=True</code> and running your .py script again
3)  Note that you should see more rows pushed to SQL Server for 1) and
    2). If you didn't see new rows, something is wrong--fix your
    deploy.py file before proceeding.
4)  If you did see new rows inserted into the database, leave
    <code>use_saved_model=True</code> in your script and do the following in
    PowerShell</p>
<pre><code>-   Install pyinstaller via
    `conda install -c acellera pyinstaller=3.2.3`
-   Then run
</code></pre>
<pre><code class="powershell">pyinstaller.exe --noconfirm --log-level=WARN --clean --nowindow --hidden-import=sklearn.tree._utils --name name_of_executable &quot;C:\Users\name\deploy_script.py&quot; --distpath &quot;C:\Users\name\compiled_model_folder&quot; 
# Copy pkl files (that represent the model) into exe directory just created
xcopy &quot;C:\Users\name\working_directory&quot;*.pkl &quot;C:\Users\name\compiled_model_folder&quot; /Y
</code></pre>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="../deploy/" class="btn btn-neutral" title="Saving and deploying a model"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>
    
  </div>

  <div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
      
        <span><a href="../deploy/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
    </span>
</div>
    <script src="../js/theme.js"></script>

</body>
</html>
