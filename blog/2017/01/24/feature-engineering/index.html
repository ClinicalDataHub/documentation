<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description"
          content="healthcare.ai is software in python and R that makes machine learning in healthcare approachable."/>
    <meta name="author" content=""/>

    <title>healthcare.ai</title>

    <!-- Bootstrap Core CSS & customized theme -->
<link href="/public/bootstrap-3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
<link href="/public/bootstrap-3.3.7/dist/css/bootstrap-theme.min.css" rel="stylesheet">

<!-- FontAwesome -->
<link rel="stylesheet" href="/public/font-awesome-4.7.0/css/font-awesome.min.css">

<!-- custom Google fonts -->
<link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
      rel='stylesheet' type='text/css'>

<!-- Custom CSS overrides (keep minimal) -->
<link href='/public/css/hc-custom.css' rel='stylesheet'/>

<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
<script src="https://oss.maxcdn.com/libs/respond.splashjs/1.4.2/respond.min.js"></script>
<![endif]-->

    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-85609357-1', 'auto');
  ga('send', 'pageview');
</script>

<!-- Facebook Pixel Code -->
<script>
!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
document,'script','https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '747112772022739');
fbq('track', 'PageView');
</script>
<noscript><img height="1" width="1" style="display:none"
src="https://www.facebook.com/tr?id=747112772022739&ev=PageView&noscript=1"/>
</noscript>
<!-- DO NOT MODIFY -->
<!-- End Facebook Pixel Code -->
</head>
<body>

<!-- Navigation -->
<nav class="navbar navbar-default navbar-fixed-top hc-custom">
    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle" data-toggle="collapse"
                    data-target="#bs-example-navbar-collapse-1">
                <i class="fa fa-bars" title="Toggle navigation"></i><span class="sr-only">Toggle navigation</span> Menu
            </button>
            <div class="navbar-brand">
                <a href="/"><img src="/public/img/healthcareAI.svg" width="207" height="30" alt="healthcare.ai logo"/></a>
            </div>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="/learn_more">Learn More</a>
                </li>
                <li>
                    <a href="/blog">Data Science Blog</a>
                </li>
                <li>
                    <a href="/r">R Package</a>
                </li>
                <li>
                    <a href="/py">Python Package</a>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>

<div class="container blog-post">
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
            <h1 class="entry-title"><a href="">Feature engineering in healthcare machine learning</a></h1>
            January 24, 2017

            <div class="blog-post-content">
                <p>In previous blog posts, we’ve discussed specific <a href="http://healthcare.ai/blog/2016/12/22/applications-of-healthcare-machine-learning/">applications of machine learning (ML) in healthcare</a> and the <a href="http://healthcare.ai/blog/2016/12/21/which-algorithms-are-in-healthcareai/">available algorithms in healthcare.ai</a>. As you build an ML model, creating and selecting the right features can be just as foundationally important as matching the right algorithm with the right use case. In this post, we will discuss how domain knowledge of healthcare data can be used to create features that make your ML models more accurate and useful. This process is known as <a href="https://en.wikipedia.org/wiki/Feature_engineering">feature engineering</a>.</p>

<p>Using an ML model off the shelf is easy but often ineffective. Feature engineering usually makes or breaks it. It’s the creative part of the process that builds the foundation for everything else. Many of the features we use in our ML models can be categorized as demographics, vitals, labs, medications, clinical events, healthcare utilization, visit details, and comorbidities. We can break these categories out more granularly into the specific features that are helpful to our ML model. From here, we often develop multiple transformations of a feature based on the underlying reasons that might inherently make that specific form of the feature more predictive—this is the engineering part.</p>

<p>For example, a patient’s blood pressure could be a clinical event feature that is predictive of their hospital length of stay. However, there are a bunch of things you need to consider before arriving at a truly predictive feature: Should you separate systolic from diastolic? Create a binary feature, hypotension, or hypertension? Or continuous? When multiple records exist, do you use the highest values or the lowest? Earliest or latest? And so on. You might even need to get so specific as to create a binary (Yes/No) feature defined by the question, “Was the patient’s systolic blood pressure 140 mmHg or higher during the first 12 hours following admission to the hospital?” or a continuous feature defined as the “Highest diastolic blood pressure value within the first 24 hours of admission to the hospital.”</p>

<p>For clarity’s sake, two additional examples of basic feature engineering that we use regularly are age and home address. A feature containing continuous age values could be helpful to the model on its own, or transformed into 10-year age groups or a binary variable identifying patients age 65 and older. An address can be broken out into its various components like city, state, and zip code, all of which can serve as proxies for helpful information that is not always available in the data, like socioeconomic status. We can also use <a href="https://en.wikipedia.org/wiki/Geocoding">geocoding</a> to convert addresses into coordinates that can be plotted against relevant maps to pick up additional insight related to things like distance to a provider or local barriers to transportation.</p>

<p>Clearly, you could come up with dozens of versions of a single feature, and some are going to work much better than others. The great thing about ML is that you can use your healthcare domain knowledge to pare down the relevant and potentially useful iterations of your feature, and then let the ML algorithm help isolate the most predictive features and transformations during final <a href="https://en.wikipedia.org/wiki/Feature_selection">feature selection</a> (a related topic that we’ll dive into in an upcoming post). The ML algorithms in <a href="http://healthcare.ai/">healthcare.ai</a> can help select the right versions, but you have to do the leg work to get them in there to try. Also, we covered this recently, but don’t forget about <a href="http://healthcare.ai/blog/2017/01/06/data-leakage-in-healthcare-machine-learning/">data leakage</a> when creating features; you’ll need to make sure you consider your use case so that you don’t train the ML model using features that would not yet be available at your preferred time of prediction.</p>

<p>Feature engineering is a ton of work and underscores the importance of data scientists and data architects having a combination of technical skills and deep domain knowledge. Some good news related to lightening the workload—we’ve already included a couple of feature engineering functions in healthcare.ai that can save a significant amount of time and effort transforming certain features.</p>

<ul>
  <li>
    <p><a href="http://healthcare.ai/r/model-pre-processing/longitudinal-imputation/">Longitudinal imputation</a> works with longitudinal data to carry a value forward from a patient’s previous record to the fill in a NULL value in the most current record. An example might be using longitudinal imputation to pull a patient’s BMI forward from their previous visit to their current visit if their weight and height have not yet been recorded. Using this function appropriately can improve model accuracy by filling in data that might otherwise be left NULL or imputed with your dataset’s mean or mode for that feature.</p>
  </li>
  <li>
    <p><a href="http://healthcare.ai/r/model-pre-processing/seasonality-handling/">Seasonality handling</a> transforms date-time columns, which are difficult for ML algorithms to handle, into their various components, ultimately treating them as separate features. Event dates, like date of admission, can hold a lot of helpful information for seasonality handling and proxying for other things that might not be well represented in the data. With minimal effort, you can use this function to test which component(s) of the admit date-time stamp like month, day of week, hour, etc., are most helpful to your model.</p>
  </li>
</ul>

<p>Automating feature engineering is difficult to do, especially considering the complexity of healthcare data and the types of healthcare ML problems we are attempting to solve. Deep domain knowledge and human intuition are very difficult to replicate. However, it’s a hot area of research and we’ll definitely continue to explore and post on advances in feature engineering. Algorithms for automatically generating features for relational data sets like the <a href="http://groups.csail.mit.edu/EVO-DesignOpt/groupWebSite/uploads/Site/DSAA_DSM_2015.pdf">Deep Feature Synthesis algorithm</a> are becoming smarter and more dynamic every day. We look forward to incorporating new techniques and algorithms into healthcare.ai so that we can all focus our efforts on improving healthcare outcomes in new and exciting ways.</p>

<p>Thanks for reading, and please <a href="http://healthcare.ai/contact">reach out</a> with any questions or comments!</p>

            </div>

            <br />
            <br />
            <br />
            <br />
            <p>
    <a href="https://feedburner.google.com/fb/a/mailverify?uri=healthcareai&amp;loc=en_US"
       onclick="window.open(this.href, 'mywin','left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;">
        Subscribe to email updates <i class="fa-rss fa"></i></a>
</p>
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <p class="copyright text-center">This project was started by and receives ongoing support from &nbsp;
                    <a href="http://healthcatalyst.com"><img src="/public/img/healthCatalystWhite.png" width="142" height="37" alt="Health Catalyst Logo"/></a></p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/public/js/jquery/jquery.min.js"></script>

<!-- Bootstrap Core JavaScript -->
<script src="/public/bootstrap-3.3.7/dist/js/bootstrap.min.js"></script>
</body>
</html>